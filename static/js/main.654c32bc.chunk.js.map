{"version":3,"sources":["components/Header.jsx","pages/HomePage.jsx","components/PersonName.jsx","components/PersonRow.jsx","helpers/constants.js","components/PeopleTable.jsx","helpers/peopleHelpers.js","helpers/formValidator.js","reducers/newPersonReducer.js","components/NewPerson.jsx","helpers/hooks.js","api/index.js","reducers/peopleReducer.js","pages/PeoplePage.jsx","pages/NotFoundPage.jsx","App.jsx","index.jsx"],"names":["Header","className","to","exact","activeClassName","HomePage","PersonName","slug","name","sex","url","useRouteMatch","search","useLocation","pathname","cn","defaultProps","PersonRow","person","personId","params","born","died","mother","motherName","father","fatherName","TABLE_COLUMNS","sort","PeopleTable","people","sortedBy","sortOrder","onColumnClick","style","borderCollapse","map","column","columnName","toLowerCase","key","type","onClick","disabled","createSlug","split","join","isParentSelectDisabled","parents","value","meta","isValid","length","isFormFieldValid","state","errorMessage","isYearValid","validateYear","validateAge","year","currentYear","Date","getFullYear","difference","actions","field","INITIAL_STATE","reduce","newPersonReducer","action","NewPerson","onAddPerson","useReducer","form","dispatch","useMemo","filterCallback","filter","getParentOptions","mothers","fathers","isFormValid","Object","values","every","prop","handleChange","e","target","history","useHistory","method","onSubmit","preventDefault","motherObj","find","fatherObj","push","placeholder","onChange","required","checked","usePeople","useState","setPeople","useEffect","fetch","process","then","response","json","query","sortBy","peopleReducer","PeoplePage","path","searchParams","URLSearchParams","appliedQuery","get","updateSearchParams","useCallback","set","delete","toString","applyQuery","debounce","newQuery","filteredPeople","RegExp","filterPeople","sortedPeople","a","b","localeCompare","sortPeople","orderedPeople","reverse","newSortOrder","NotFoundPage","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.654c32bc.chunk.js","sourcesContent":["import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nexport const Header = () => (\n  <header>\n    <nav className=\"navbar\">\n      <ul className=\"navbar-menu\">\n        <li>\n          <NavLink\n            to=\"/\"\n            exact\n            className=\"navbar-item is-tab\"\n            activeClassName=\"is-active\"\n          >\n            Home\n          </NavLink>\n        </li>\n\n        <li>\n          <NavLink\n            to=\"/people\"\n            className=\"navbar-item is-tab\"\n            activeClassName=\"is-active\"\n          >\n            People\n          </NavLink>\n        </li>\n      </ul>\n    </nav>\n  </header>\n);\n","import React from 'react';\n\nexport const HomePage = () => (\n  <h1 className=\"title\">Home Page</h1>\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport { Link, useLocation, useRouteMatch } from 'react-router-dom';\n\nexport const PersonName = ({ slug, name, sex }) => {\n  const { url } = useRouteMatch();\n  const { search } = useLocation();\n\n  return (\n    <Link\n      to={{\n        pathname: `${url}/${slug}`,\n        search,\n      }}\n      className={cn({\n        'has-text-info': sex === 'm',\n        'has-text-danger': sex === 'f',\n      })}\n    >\n      {name}\n    </Link>\n  );\n};\n\nPersonName.propTypes = {\n  slug: PropTypes.string.isRequired,\n  name: PropTypes.string,\n  sex: PropTypes.string,\n};\n\nPersonName.defaultProps = {\n  name: '',\n  sex: '',\n};\n","import React from 'react';\nimport cn from 'classnames';\nimport { useRouteMatch } from 'react-router-dom';\n\nimport { PersonName } from './PersonName';\nimport { PersonType } from '../types/PersonType';\n\nexport const PersonRow = ({ person }) => {\n  const { params } = useRouteMatch('/people/:personId?');\n  const { personId } = params;\n\n  return person !== null && (\n    <tr\n      className={cn('Person', {\n        'is-selected': personId === person.slug,\n      })}\n    >\n      <td>\n        <PersonName {...person} />\n      </td>\n\n      <td>\n        {person.sex}\n      </td>\n\n      <td>\n        {person.born}\n      </td>\n\n      <td>\n        {person.died}\n      </td>\n\n      <td>\n        {person.mother ? (\n          <PersonName {...person.mother} />\n        ) : (\n          person.motherName\n        )}\n      </td>\n\n      <td>\n        {person.father ? (\n          <PersonName {...person.father} />\n        ) : (\n          person.fatherName\n        )}\n      </td>\n    </tr>\n  );\n};\n\nPersonRow.propTypes = {\n  person: PersonType,\n};\n\nPersonRow.defaultProps = {\n  person: null,\n};\n","export const TABLE_COLUMNS = [\n  {\n    name: 'Name',\n    sort: true,\n  },\n  {\n    name: 'Sex',\n    sort: true,\n  },\n  {\n    name: 'Born',\n    sort: true,\n  },\n  {\n    name: 'Died',\n    sort: true,\n  },\n  {\n    name: 'Mother',\n    sort: false,\n  },\n  {\n    name: 'Father',\n    sort: false,\n  },\n];\n\nexport const FORM_FIELDS = [\n  'name', 'sex', 'born', 'died', 'mother', 'father',\n];\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\n\nimport { PersonRow } from './PersonRow';\nimport { TABLE_COLUMNS } from '../helpers/constants';\n\nexport const PeopleTable = ({ people, sortedBy, sortOrder, onColumnClick }) => (\n  <table\n    className=\"table is-striped is-hoverable\"\n    style={{ borderCollapse: 'collapse' }}\n  >\n    <thead>\n      <tr>\n        {TABLE_COLUMNS.map((column) => {\n          const columnName = column.name.toLowerCase();\n\n          return (\n            <th key={column.name}>\n              <button\n                type=\"button\"\n                className={cn('button', 'is-white', {\n                  'is-primary is-light': sortedBy === columnName,\n                })}\n                onClick={() => onColumnClick(columnName)}\n                disabled={!column.sort}\n              >\n                <span>{column.name}</span>\n\n                {column.sort && (\n                  <span className=\"icon is-small\">\n                    <i className={cn('fas', {\n                      'fa-sort-up': sortedBy === columnName\n                        && sortOrder === 'asc',\n                      'fa-sort-down': sortedBy === columnName\n                        && sortOrder === 'desc',\n                      'fa-sort': sortedBy !== columnName || !sortOrder,\n                    })}\n                    />\n                  </span>\n                )}\n              </button>\n            </th>\n          );\n        })}\n      </tr>\n    </thead>\n\n    <tbody>\n      {people.map(person => (\n        <PersonRow key={person.slug} person={person} />\n      ))}\n    </tbody>\n  </table>\n);\n\nPeopleTable.propTypes = {\n  people: PropTypes.arrayOf(\n    PropTypes.shape({\n      slug: PropTypes.string,\n    }),\n  ),\n  onColumnClick: PropTypes.func.isRequired,\n  sortedBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n};\n\nPeopleTable.defaultProps = {\n  people: [],\n  sortedBy: '',\n  sortOrder: '',\n};\n","export function filterPeople(people, query) {\n  return people.filter(\n    ({ name, motherName, fatherName }) => (\n      (name + motherName + fatherName)\n        .search(new RegExp(query, 'i')) !== -1\n    ),\n  );\n}\n\nexport function sortPeople(people, sortBy) {\n  if (!sortBy) {\n    return people;\n  }\n\n  return [...people].sort((a, b) => {\n    switch (sortBy) {\n      case 'name':\n      case 'sex':\n        return a[sortBy].localeCompare(b[sortBy]);\n      default:\n        return a[sortBy] - b[sortBy];\n    }\n  });\n}\n\nexport function createSlug(name, born) {\n  return `${name.split(' ').join('-').toLowerCase()}-${born}`;\n}\n\nexport function getParentOptions(people, born, died) {\n  if (!born.value || !born.meta.isValid) {\n    return [];\n  }\n\n  const filterCallback = (person, sex) => (\n    person.sex === sex\n      && person.born < born.value\n      && person.died > born.value\n  );\n\n  return [\n    people.filter(person => filterCallback(person, 'f')),\n    people.filter(person => filterCallback(person, 'm')),\n  ];\n}\n\nexport function isParentSelectDisabled(parents, born) {\n  return !born.value || !born.meta.isValid || !parents || parents.length === 0;\n}\n","const MIN_YEAR = 1400;\nconst MAX_AGE_DIFFERENCE = 150;\n\nexport function isFormFieldValid(name, value, state) {\n  switch (name) {\n    case 'name':\n      return {\n        isValid: value.search(/\\d/g) === -1,\n        errorMessage: 'Only letters and spaces are allowed in the name',\n      };\n\n    case 'born': {\n      const isYearValid = validateYear(value);\n\n      if (!isYearValid.isValid) {\n        return isYearValid;\n      }\n\n      return validateAge(value, state.died.value);\n    }\n\n    case 'died': {\n      const isYearValid = validateYear(value);\n\n      if (!isYearValid.isValid) {\n        return isYearValid;\n      }\n\n      return validateAge(state.born.value, value);\n    }\n\n    default:\n      return {\n        isValid: true,\n        errorMessage: '',\n      };\n  }\n}\n\nfunction validateYear(year) {\n  const currentYear = new Date().getFullYear();\n\n  return {\n    isValid: year >= MIN_YEAR && year <= currentYear,\n    errorMessage: `Year should be >= 1400 and <= ${currentYear}`,\n  };\n}\n\nfunction validateAge(born, died) {\n  const difference = died - born;\n\n  return {\n    isValid: died === ''\n      || (difference >= 0 && difference < MAX_AGE_DIFFERENCE),\n    errorMessage: 'Difference between born and died should be >= 0 and < 150',\n  };\n}\n","import { isFormFieldValid } from '../helpers/formValidator';\nimport { FORM_FIELDS } from '../helpers/constants';\n\nconst RESET = 'RESET';\nconst SET_FIELD = 'SET_FIELD';\n\nexport const actions = {\n  reset: () => ({ type: RESET }),\n  setField: (field, value) => ({\n    type: SET_FIELD, field, value,\n  }),\n};\n\nexport const INITIAL_STATE = FORM_FIELDS.reduce(\n  (state, field) => ({\n    ...state,\n    [field]: {\n      value: '',\n      meta: {\n        isValid: true,\n        errorMessage: '',\n      },\n    },\n  }),\n  {},\n);\n\nexport function newPersonReducer(state, action) {\n  const { type, field, value } = action;\n\n  switch (type) {\n    case SET_FIELD:\n      return {\n        ...state,\n        [field]: {\n          value,\n          meta: isFormFieldValid(field, value, state),\n        },\n      };\n\n    case RESET:\n      return { ...INITIAL_STATE };\n\n    default:\n      return state;\n  }\n}\n","import React, { useReducer, useMemo } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\n\nimport {\n  createSlug, getParentOptions, isParentSelectDisabled,\n} from '../helpers/peopleHelpers';\nimport {\n  newPersonReducer, INITIAL_STATE, actions,\n} from '../reducers/newPersonReducer';\nimport { PersonType } from '../types/PersonType';\n\nexport const NewPerson = ({ people, onAddPerson }) => {\n  const [form, dispatch] = useReducer(newPersonReducer, INITIAL_STATE);\n  const {\n    name, sex, born, died, mother, father,\n  } = form;\n\n  const [mothers, fathers] = useMemo(\n    () => getParentOptions(people, born, died),\n    [people, born, died],\n  );\n\n  const isFormValid = Object.values(form).every(prop => prop.meta.isValid);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    dispatch(actions.reset());\n\n    const motherObj = people.find(({ slug }) => slug === mother.value) || null;\n    const fatherObj = people.find(({ slug }) => slug === father.value) || null;\n\n    onAddPerson({\n      name: name.value,\n      slug: `${createSlug(name.value, born.value)}`,\n      sex: sex.value,\n      born: +born.value,\n      died: +died.value,\n      motherName: motherObj?.name,\n      mother: motherObj,\n      fatherName: fatherObj?.name,\n      father: fatherObj,\n    });\n\n    history.push({\n      pathname: '/people',\n      search,\n    });\n  };\n\n  const handleChange = (e) => {\n    dispatch(actions.setField(e.target.name, e.target.value));\n  };\n\n  const history = useHistory();\n  const { search } = useLocation();\n\n  return (\n    <div className=\"card\">\n      <div className=\"section\">\n        <form method=\"post\" onSubmit={handleSubmit}>\n          <div className=\"field\">\n            <div className=\"control\">\n              <input\n                type=\"text\"\n                className={cn('input', {\n                  'is-danger': !name.meta.isValid,\n                })}\n                name=\"name\"\n                placeholder=\"Name\"\n                value={name.value}\n                onChange={handleChange}\n                required\n              />\n            </div>\n\n            {name.meta.isValid || (\n              <p className=\"help is-danger\">\n                {name.meta.errorMessage}\n              </p>\n            )}\n          </div>\n\n          <div className=\"field\">\n            <div className=\"control\">\n              <label className=\"radio\">\n                <input\n                  type=\"radio\"\n                  name=\"sex\"\n                  value=\"m\"\n                  checked={sex.value === 'm'}\n                  onChange={handleChange}\n                  required\n                />\n                Male\n              </label>\n\n              <label className=\"radio\">\n                <input\n                  type=\"radio\"\n                  name=\"sex\"\n                  value=\"f\"\n                  checked={sex.value === 'f'}\n                  onChange={handleChange}\n                  required\n                />\n                Female\n              </label>\n            </div>\n          </div>\n\n          <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n              <div className=\"field\">\n                <div className=\"control\">\n                  <input\n                    type=\"number\"\n                    className={cn('input', {\n                      'is-danger': !born.meta.isValid,\n                    })}\n                    name=\"born\"\n                    placeholder=\"Born\"\n                    value={born.value}\n                    onChange={handleChange}\n                    required\n                  />\n                </div>\n\n                {born.meta.isValid || (\n                  <p className=\"help is-danger\">\n                    {born.meta.errorMessage}\n                  </p>\n                )}\n              </div>\n\n              <div className=\"field\">\n                <div className=\"control\">\n                  <input\n                    type=\"number\"\n                    className={cn('input', {\n                      'is-danger': !died.meta.isValid,\n                    })}\n                    name=\"died\"\n                    placeholder=\"Died\"\n                    value={died.value}\n                    onChange={handleChange}\n                    disabled={born.value === ''}\n                    required\n                  />\n                </div>\n\n                {died.meta.isValid || (\n                  <p className=\"help is-danger\">\n                    {died.meta.errorMessage}\n                  </p>\n                )}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"field is-horizontal\">\n            <div className=\"field-body\">\n              <div className=\"field\">\n                <div className=\"control\">\n                  <div className=\"select is-fullwidth\">\n                    <select\n                      name=\"mother\"\n                      value={mother.value}\n                      onChange={handleChange}\n                      disabled={isParentSelectDisabled(mothers, born)}\n                    >\n                      <option>Choose a mother</option>\n                      {mothers && mothers.map(person => (\n                        <option\n                          key={person.slug}\n                          value={person.slug}\n                        >\n                          {person.name}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"field\">\n                <div className=\"control\">\n                  <div className=\"select is-fullwidth\">\n                    <select\n                      name=\"father\"\n                      value={father.value}\n                      onChange={handleChange}\n                      disabled={isParentSelectDisabled(fathers, born)}\n                    >\n                      <option>Choose a father</option>\n                      {fathers && fathers.map(person => (\n                        <option\n                          key={person.slug}\n                          value={person.slug}\n                        >\n                          {person.name}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"control\">\n            <button\n              type=\"submit\"\n              className=\"button is-primary\"\n              disabled={!isFormValid}\n            >\n              Submit\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nNewPerson.propTypes = {\n  people: PropTypes.arrayOf(PersonType),\n  onAddPerson: PropTypes.func.isRequired,\n};\n\nNewPerson.defaultProps = {\n  people: [],\n};\n","import { useState, useEffect } from 'react';\nimport { getPeople } from '../api';\n\nexport function usePeople() {\n  const [people, setPeople] = useState([]);\n\n  useEffect(() => {\n    getPeople()\n      .then((response) => {\n        setPeople(response.map(person => ({\n          ...person,\n          mother: response.find(\n            ({ name }) => name === person.motherName,\n          ) || null,\n          father: response.find(\n            ({ name }) => name === person.fatherName,\n          ) || null,\n        })));\n      });\n  }, []);\n\n  return [people, setPeople];\n}\n","export const getPeople = () => (\n  fetch(process.env.REACT_APP_API_URL)\n    .then(response => response.json())\n);\n","const FILTER = 'FILTER';\nconst SORT_BY = 'SORT_BY';\nconst SORT_ORDER = 'SORT_ORDER';\n\nexport const actions = {\n  filter: query => ({\n    type: FILTER, query,\n  }),\n  sortBy: sortBy => ({\n    type: SORT_BY, sortBy,\n  }),\n  sortOrder: sortOrder => ({\n    type: SORT_ORDER, sortOrder,\n  }),\n};\n\nexport function peopleReducer(state, action) {\n  switch (action.type) {\n    case FILTER:\n      return {\n        ...state,\n        query: action.query,\n      };\n\n    case SORT_BY:\n      return {\n        ...state,\n        sortBy: action.sortBy,\n        sortOrder: 'asc',\n      };\n\n    case SORT_ORDER:\n      return {\n        ...state,\n        sortOrder: action.sortOrder,\n      };\n\n    default:\n      return state;\n  }\n}\n","import React, {\n  useMemo, useCallback, useReducer,\n} from 'react';\nimport {\n  Link, Switch, Route,\n  useLocation, useRouteMatch, useHistory,\n} from 'react-router-dom';\nimport debounce from 'lodash/debounce';\nimport '@fortawesome/fontawesome-free/css/all.css';\n\nimport { PeopleTable } from '../components/PeopleTable';\nimport { NewPerson } from '../components/NewPerson';\nimport { filterPeople, sortPeople } from '../helpers/peopleHelpers';\nimport { usePeople } from '../helpers/hooks';\nimport { peopleReducer, actions } from '../reducers/peopleReducer';\n\nexport const PeoplePage = () => {\n  const [people, setPeople] = usePeople();\n\n  const history = useHistory();\n  const { path, url } = useRouteMatch();\n  const { search } = useLocation();\n  const searchParams = new URLSearchParams(search);\n\n  const appliedQuery = searchParams.get('query') || '';\n  const [state, dispatch] = useReducer(peopleReducer, {\n    query: appliedQuery,\n    sortBy: searchParams.get('sortBy') || '',\n    sortOrder: searchParams.get('sortOrder') || '',\n  });\n\n  const updateSearchParams = useCallback((key, value) => {\n    if (value) {\n      searchParams.set(key, value);\n    } else {\n      searchParams.delete(key);\n    }\n\n    history.push({ search: searchParams.toString() });\n  }, []);\n\n  const applyQuery = useCallback(\n    debounce((newQuery) => {\n      updateSearchParams('query', newQuery);\n    }, 500),\n    [],\n  );\n\n  const handleQueryChange = (e) => {\n    const newQuery = e.target.value;\n\n    dispatch(actions.filter(newQuery));\n    applyQuery(newQuery);\n  };\n\n  const handleColumnClick = (column) => {\n    if (state.sortBy === column) {\n      const newSortOrder = (state.sortOrder === 'asc') ? 'desc' : 'asc';\n\n      dispatch(actions.sortOrder(newSortOrder));\n      updateSearchParams('sortOrder', newSortOrder);\n    } else {\n      dispatch(actions.sortBy(column));\n      updateSearchParams('sortBy', column);\n      updateSearchParams('sortOrder', 'asc');\n    }\n  };\n\n  const filteredPeople = useMemo(() => (\n    filterPeople(people, appliedQuery)\n  ), [people, appliedQuery]);\n\n  const sortedPeople = useMemo(() => (\n    sortPeople(filteredPeople, state.sortBy)\n  ), [filteredPeople, state.sortBy]);\n\n  const orderedPeople = useMemo(() => {\n    if (state.sortOrder === 'desc') {\n      return [...sortedPeople].reverse();\n    }\n\n    return sortedPeople;\n  }, [sortedPeople, state.sortOrder]);\n\n  return (\n    <>\n      <h1 className=\"title\">People Page</h1>\n\n      <div className=\"field\">\n        <div className=\"control has-icons-left\">\n          <input\n            type=\"text\"\n            className=\"input\"\n            value={state.query}\n            onChange={handleQueryChange}\n            placeholder=\"Enter person's name\"\n          />\n\n          <span className=\"icon is-left\">\n            <i className=\"fas fa-search\" />\n          </span>\n        </div>\n      </div>\n\n      <Switch>\n        <Route path={`${path}/new`}>\n          <NewPerson\n            people={people}\n            onAddPerson={person => setPeople([...people, person])}\n          />\n        </Route>\n\n        <Route>\n          <div className=\"field\">\n            <Link\n              className=\"button is-primary\"\n              to={{\n                pathname: `${url}/new`,\n                search,\n              }}\n            >\n              Add a Person\n            </Link>\n          </div>\n        </Route>\n      </Switch>\n\n      <PeopleTable\n        people={orderedPeople}\n        sortedBy={state.sortBy}\n        sortOrder={state.sortOrder}\n        onColumnClick={handleColumnClick}\n      />\n    </>\n  );\n};\n","import React from 'react';\n\nexport const NotFoundPage = () => (\n  <h1 className=\"title\">Page not found</h1>\n);\n","import React from 'react';\nimport 'bulma';\n\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport { Header } from './components/Header';\nimport { HomePage } from './pages/HomePage';\nimport { PeoplePage } from './pages/PeoplePage';\nimport { NotFoundPage } from './pages/NotFoundPage';\n\nconst App = () => (\n  <div className=\"container\">\n    <Header />\n\n    <div className=\"section\">\n      <Switch>\n        <Route path=\"/\" exact>\n          <HomePage />\n        </Route>\n\n        <Route path=\"/people\">\n          <PeoplePage />\n        </Route>\n\n        <Redirect path=\"/home\" to=\"/\" />\n\n        <Route>\n          <NotFoundPage />\n        </Route>\n      </Switch>\n    </div>\n  </div>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport App from './App';\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}